<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="style.css">
    <script src="js/consts.js"></script>
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <script src="js/pie.js"></script>
    <title>Genshin Pity Calculator</title>
</head>
<body>
    <div id="heading">
    <h1>Genshin Impact Pity Calculator</h1>
    <p>Under the current promotional banner, select History and click the right arrow until you see the last 5-star you pulled.<br>If you haven't pulled a 5-star yet, click as far right as you can until you see your first few wishes in that banner.<br>Then hit Ctrl+A followed by Ctrl+C and paste everything in this box:</p>
    </div>

    <div id="field">
    <textarea id="input" rows="4" cols="50"></textarea>
    <br><br>
    <button id="submit" onclick="main(document.getElementById('input').value)">â–¶</button>
    </div>

    <h2 id="banner">Character Event Banner</h2>
    <br>

    <div id="results">

        <div id="left">
            <h2>Your pity count is <span id="pity">0</span>.</span></h2>
            <p>That means you're <span id="to90">0</span> pulls away from your <span id="hardpity" class="dontbold">90</span>th pull: a guaranteed 5-star because of hard pity.<br>It probably won't take you that many pulls, though, because:</p>
            <h2>Your chances will massively improve after <span id="to76">76</span> pulls.</h2>
            <p>This is known as "soft pity" and it starts on one's <span id="softpity" class="dontbold">76</span>th pull.</p>
            <br>
            <h2>Your next single pull has a <span id="baserate">0.6%</span> chance to be a 5-star, shown in green:</h2>
            <div id="bar"><div></div></div>
            <p>The base rate is usually 0.6% during pulls 1-75, 32.4% during pulls 76-89, and 100% at pull 90.</p>
        </div>

        <div id="right">
            <h2>Who or what will your next five-star be when you get it? Hover for details.</h2>
            <div id="pie-chart" style="width: 30%;">
                <canvas width="30%" height="30%"></canvas>
                <div id="pie-hover">
                    <table></table>
                </div>
            </div>
            <p id="promonotice">Assuming that you will pull your next 5-star during this banner.<br>If you're planning for future banners, imagine the promotional character in <span>Albedo</span>'s place.</p>
        </div>
    </div>

    <div id="status">
        <br>
        <h2 id="primos">You'll need <img src="img/primogem.png" height="2%" width="2%"><span>12,160</span> primogems to hit soft pity.</h2>
        <p>It's a good idea to aim for a few hundred primogems above this, just to get comfortably into soft pity.</p>
    </div> 

</body>
</html>